(()=>{(()=>{"use strict";var u={};u.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(t){if(typeof window=="object")return window}}(),(()=>{var t;u.g.importScripts&&(t=u.g.location+"");var e=u.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=s[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),u.p=t})();var ee={};function m(t){if(t===void 0)throw new Error("Value not defined");if(t===null)throw new Error("Value is null")}function l(t,e){if(m(t),!(t instanceof e))throw new TypeError("Wrong object type")}const a=(t,e,s)=>{const r=t.querySelector(e);return l(r,s),r},w=(t,e)=>{const s=t.target;return s instanceof Element?s.closest(e):null};var T=Object.defineProperty,f=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,h=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,_=(t,e)=>{for(var s in e||(e={}))E.call(e,s)&&h(t,s,e[s]);if(f)for(var s of f(e))v.call(e,s)&&h(t,s,e[s]);return t},b=(t,e,s)=>(h(t,typeof e!="symbol"?e+"":e,s),s),N=(t=>(t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.NOT_FOUND=404]="NOT_FOUND",t))(N||{});class H{constructor(e,s){b(this,"baseLink"),b(this,"options"),this.baseLink=e,this.options=s}getResp({endpoint:e,options:s={}},r=()=>{console.error("No callback for GET response")}){this.load("GET",e,r,s)}errorHandler(e){if(!e.ok)throw(e.status===401||e.status===404)&&console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,s){const r=_(_({},this.options),e);let o=`${this.baseLink}${s}?`;return Object.keys(r).forEach(n=>{o+=`${n}=${r[n]}&`}),o.slice(0,-1)}load(e,s,r,o={}){fetch(this.makeUrl(o,s),{method:e}).then(n=>this.errorHandler(n)).then(n=>n.json()).then(n=>r(n)).catch(n=>console.error(n))}}const M=H,y="https://rss-news-api.onrender.com/",x="d5df469e83c04a999a0366000edfc852";class C extends M{constructor(){super(y,{apiKey:x})}}const O=C;var D=Object.defineProperty,P=(t,e,s)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e,s)=>(P(t,typeof e!="symbol"?e+"":e,s),s);class B{constructor(){d(this,"burgerButton"),d(this,"burgerButtonText"),d(this,"languagesNode"),d(this,"sourcesNode"),d(this,"onBurgerButtonClick",()=>{this.burgerButton.classList.contains("js-menu-shown")?this.closeMenu():this.openMenu()}),d(this,"onSourcesClick",e=>{w(e,".source__item")&&this.burgerButton.classList.contains("js-menu-shown")&&this.closeMenu()}),this.burgerButton=a(document,".header__burger",HTMLButtonElement),this.burgerButtonText=a(this.burgerButton,".visually-hidden",HTMLSpanElement),this.languagesNode=a(document.body,".languages",HTMLDivElement),this.sourcesNode=a(document.body,".sources",HTMLDivElement),this.burgerButton.addEventListener("click",this.onBurgerButtonClick),this.sourcesNode.addEventListener("click",this.onSourcesClick)}openMenu(){this.burgerButton.classList.add("js-menu-shown"),this.languagesNode.classList.add("js-languages-shown"),this.sourcesNode.classList.add("js-sources-shown"),this.burgerButtonText.textContent="Hide languages and sources",this.languagesNode.style.height=this.languagesNode.scrollHeight+"px",this.sourcesNode.style.height=this.sourcesNode.scrollHeight+"px"}closeMenu(){this.burgerButton.classList.remove("js-menu-shown"),this.languagesNode.classList.remove("js-languages-shown"),this.sourcesNode.classList.remove("js-sources-shown"),this.burgerButtonText.textContent="Show languages and sources",this.languagesNode.style.height="0px",this.sourcesNode.style.height="0px"}}var j=Object.defineProperty,S=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,A=(t,e,s)=>(S(t,typeof e!="symbol"?e+"":e,s),s);class F extends O{constructor(){super(...arguments),A(this,"menu",new B)}getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,s){let r=e.target;const o=e.currentTarget;for(l(r,HTMLElement),l(o,HTMLElement);r!==o;){if(r.classList.contains("source__item")){const n=r.getAttribute("data-source-id");m(n),o.getAttribute("data-source")!==n&&(o.setAttribute("data-source",n),super.getResp({endpoint:"everything",options:{sources:n}},s));return}r=r.parentNode,l(r,HTMLElement)}}}const I=F,U=u.p+"images/6c44d33c4b2e832521f4.svg";class ${draw(e){const s=e.length>=10?e.filter((i,g)=>g<10):e,r=document.createDocumentFragment(),o=a(document,"#newsItemTemp",HTMLTemplateElement);s.forEach((i,g)=>{const c=o.content.cloneNode(!0);l(c,DocumentFragment),g%2&&a(c,".news__item",HTMLElement).classList.add("alt"),a(c,".news__meta-photo",HTMLElement).style.backgroundImage=`url(${i.urlToImage||U})`,a(c,".news__meta-author",HTMLElement).textContent=i.author||i.source.name,a(c,".news__meta-date",HTMLElement).textContent=i.publishedAt.slice(0,10).split("-").reverse().join("-"),a(c,".news__description-title",HTMLElement).textContent=i.title,a(c,".news__description-source",HTMLElement).textContent=i.source.name,a(c,".news__description-content",HTMLElement).textContent=i.description,a(c,".news__read-more a",HTMLElement).setAttribute("href",i.url),r.append(c)});const n=a(document,".news",HTMLElement);n.classList.remove("js-news-shown"),setTimeout(()=>n.innerHTML="",300),setTimeout(()=>{n.classList.add("js-news-shown"),n.appendChild(r)},300)}}const V=$;class R{draw(e){const s=document.createDocumentFragment(),r=a(document,"#sourceItemTemp",HTMLTemplateElement);e.forEach(o=>{const n=r.content.cloneNode(!0);l(n,DocumentFragment),a(n,".source__item-name",HTMLElement).textContent=o.name,a(n,".source__item",HTMLElement).setAttribute("data-source-id",o.id),s.append(n)}),a(document,".sources",HTMLElement).replaceChildren(),a(document,".sources",HTMLElement).append(s)}}const q=R,G={ar:"Arabic",de:"German",en:"English",es:"Spanish",fr:"French",he:"Hebrew",it:"Italian",nl:"Dutch",no:"Norwegian",pt:"Portuguese",ru:"Russian",sv:"Swedish",ud:"Urdu",zh:"Chinese"};class Z{draw(e){const s=Array.from(new Set(e.map(o=>o.language))),r=document.createDocumentFragment();s.forEach(o=>{const n=document.createElement("button");n.classList.add("languages__button"),n.setAttribute("type","button"),n.textContent=G[o]||o.toUpperCase(),n.dataset.lang=o,setTimeout(()=>n.classList.add("js-languages-button-shown"),300),r.appendChild(n)}),a(document,".languages",HTMLDivElement).appendChild(r)}}const z=Z;var K=Object.defineProperty,W=(t,e,s)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,p=(t,e,s)=>(W(t,typeof e!="symbol"?e+"":e,s),s);class J{constructor(){p(this,"news"),p(this,"sources"),p(this,"languages"),p(this,"sourcesData",[]),this.news=new V,this.sources=new q,this.languages=new z}getSourcesData(){return this.sourcesData}drawNews(e){if("articles"in e){this.news.draw(e.articles);return}else this.news.draw([])}drawSources(e){if("sources"in e){this.sources.draw(e.sources);return}else this.sources.draw([])}drawLanguages(e){if(!("sources"in e))throw new Error("Sources not found");this.languages.draw(e.sources),this.sourcesData=e.sources}}const te=null;var Q=Object.defineProperty,X=(t,e,s)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,L=(t,e,s)=>(X(t,typeof e!="symbol"?e+"":e,s),s);class Y{constructor(){L(this,"controller"),L(this,"view"),this.controller=new I,this.view=new J}start(){const e=a(document,".languages",HTMLDivElement),s=a(document,".sources",HTMLDivElement);e.addEventListener("click",r=>{const o=w(r,".languages__button");if(o instanceof HTMLButtonElement){const n=this.view.getSourcesData().filter(i=>i.language===o.dataset.lang);setTimeout(()=>{this.view.sources.draw(n),s.classList.add("js-sources-shown"),s.style.height=s.scrollHeight+"px"},s.classList.contains("js-sources-shown")?500:0),s.classList.remove("js-sources-shown"),s.style.height=""}}),a(document,".sources",HTMLDivElement).addEventListener("click",r=>this.controller.getNews(r,o=>this.view.drawNews(o))),this.controller.getSources(r=>this.view.drawLanguages(r))}}const k=Y;new k().start()})();})();
